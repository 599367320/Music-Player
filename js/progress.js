"use strict";!function(t){function e(){this.durTime=0,this.frameId=null,this.startTime=0,this.lastPercent=0,this.init()}function i(t){this.obj=t,this.startPointX=0,this.startLeft=0,this.percent=0,this.init()}e.prototype={init:function(){this.getDom()},getDom:function(){this.curTime=document.querySelector(".cur-time"),this.circle=document.querySelector(".circle"),this.frontBg=document.querySelector(".front-bg"),this.totalTime=document.querySelector(".total-time")},renderAllTime:function(t){this.durTime=t,t=this.formatTime(t),this.totalTime.innerHTML=t},formatTime:function(t){t=Math.round(t);var e=Math.floor(t/60),i=t%60;return(e=e<10?"0"+e:e)+":"+(i=i<10?"0"+i:i)},move:function(t,n){var r=this;cancelAnimationFrame(this.frameId),this.lastPercent=void 0===t?this.lastPercent:t,this.startTime=(new Date).getTime();!function t(){var e=(new Date).getTime(),i=r.lastPercent+(e-r.startTime)/(1e3*r.durTime);i<=1?r.update(i,n):cancelAnimationFrame(r.frameId),r.frameId=requestAnimationFrame(t)}()},update:function(t,e){var i,n=this.formatTime(this.durTime*t);this.curTime.innerHTML=n,this.frontBg.style.width=100*t+"%",e||(i=this.circle.parentNode.offsetWidth*t,this.circle.style.transform="translateX("+i+"px) translateY(-50%)")},stop:function(){cancelAnimationFrame(this.frameId);var t=(new Date).getTime();this.lastPercent+=(t-this.startTime)/(1e3*this.durTime)}},i.prototype={init:function(){var i=this;this.obj.style.transform="translateX(0) translateY(-50%)",this.obj.addEventListener("touchstart",function(t){i.startPointX=t.changedTouches[0].pageX,i.startLeft=parseFloat(i.obj.style.transform.split("(")[1]),i.start&&i.start()}),this.obj.addEventListener("touchmove",function(t){i.disPointX=t.changedTouches[0].pageX-i.startPointX;var e=i.startLeft+i.disPointX;e<0?e=0:e>i.obj.offsetParent.offsetWidth&&(e=i.obj.offsetParent.offsetWidth),i.obj.style.transform="translateX("+e+"px) translateY(-50%)",i.percent=e/i.obj.offsetParent.offsetWidth,i.move&&i.move(i.percent)}),this.obj.addEventListener("touchend",function(t){i.end&&i.end(i.percent)})}},t.progress={pro:new e,drag:function(t){return new i(t)}}}(window.player||(window.player={}));